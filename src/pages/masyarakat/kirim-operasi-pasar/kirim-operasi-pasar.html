<!--
  Generated template for the KirimOperasiPasar page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>Kirim operasi pasar</ion-title>
  </ion-navbar>

</ion-header>


<ion-content >
	<form #submitForm="ngForm" novalidate >
		<ion-list>
			<ion-row>
				<ion-col>
					<ion-item>
					  <ion-label stacked color="primary">Komoditas </ion-label>
					  <ion-select [(ngModel)]="operasi.komoditas" name="komoditas" #komoditas="ngModel" placeholder="pilih komoditas" required>
					    <ion-option *ngFor="let data of dataKomoditas" value="{{data.komoditas_id}}">{{data.name}}</ion-option>
					  </ion-select>
					</ion-item>
				</ion-col>
			</ion-row>
			<p ion-text [hidden]="komoditas.valid || submitted == false" color="danger" padding-left>
				Pilih komoditas
			</p>
			<ion-row padding-left>
				<ion-col>
					<!-- <ion-row>
						<ion-col>
							<ion-label stacked color="primary">Lokasi Pasar</ion-label>
						</ion-col>
					</ion-row>
					<ion-row>
						<ion-col>
							<div  (click)="getMyLocation()" >
						        <ion-icon name='pin'></ion-icon>
						          Use my location
					        </div>
						</ion-col>
					</ion-row> -->
					<ion-row>
						<ion-label stacked color="primary">Lokasi Pasar</ion-label>
					</ion-row>
					<ion-row>
						<ion-col>
							<button ion-button [color]="useManualLocationColor" small outline (click)="chooseLocation(1)">Input lokasi</button>
						</ion-col>
						<ion-col>
							<button ion-button [color]="useCurrentLocationColor" small outline (click)="chooseLocation(0)">Ambil dari peta</button>
						</ion-col>
					</ion-row>
					<div padding-left *ngIf="useCurrentLocation">{{lokasi.alamat}}</div>
				</ion-col>
			</ion-row>
			<div *ngIf="!useCurrentLocation">
				<ion-item>
					<ion-label stacked color="primary">Pilih provinsi </ion-label>
					<ion-select [(ngModel)]="pilihProvinsi" [disabled]="!provinsi" (ionChange)="changeProvinsi(pilihProvinsi)" name="provinsi">
						<ion-option *ngFor="let data of provinsi" value="{{data.id_prov}}">{{data.nama}}</ion-option>
					</ion-select>
				</ion-item>
				<ion-item>
					<ion-label stacked color="primary">Pilih kabupaten </ion-label>
					<ion-select [(ngModel)]="pilihKabupaten" [disabled]="!kabupaten" (ionChange)="changeKabupaten(pilihKabupaten)" name="kabupaten">
						<ion-option *ngFor="let data of kabupaten" value="{{data.id_kab}}">{{data.nama}}</ion-option>
					</ion-select>
				</ion-item>
				<ion-item>
					<ion-label stacked color="primary">Pilih kecamatan </ion-label>
					<ion-select [(ngModel)]="pilihKecamatan" [disabled]="!kecamatan" (ionChange)="changeKecamatan(pilihKecamatan)" name="kecamatan">
						<ion-option *ngFor="let data of kecamatan" value="{{data.id_kec}}">{{data.nama}}</ion-option>
					</ion-select>
				</ion-item>
				<ion-item>
					<ion-label stacked color="primary">Pilih kelurahan </ion-label>
					<ion-select [(ngModel)]="pilihKelurahan" [disabled]="!kelurahan" (ionChange)="changeKelurahan(pilihKelurahan)" name="kelurahan">
						<ion-option *ngFor="let data of kelurahan" value="{{data.id_kel}}">{{data.nama}}</ion-option>
					</ion-select>
				</ion-item>
				<ion-item>
					<ion-label stacked color="primary">Alamat</ion-label>
					<ion-input [(ngModel)]="inputAlamat" placeholder="Alamat" name="alamat" type="text" #alamat="ngModel" required>
					</ion-input>
				</ion-item>
				<p ion-text [hidden]="alamat.valid || submitted == false" color="danger" padding-left>
					Alamat harus diisi
				</p>
			</div> 

			<ion-row padding-left>
				<ion-col>
					<ion-item no-padding>
						<ion-label stacked color="primary">Pesan</ion-label>
						<ion-textarea [(ngModel)]="operasi.pesan" name="pesan" #pesan="ngModel" rows="6" required placeholder="Pesan"></ion-textarea>
					</ion-item>
				</ion-col>
			</ion-row>
			<p ion-text [hidden]="pesan.valid || submitted === false" color="danger" padding-left>
				Pesan harus diisi
			</p>
		</ion-list>

		<div padding>
			<button ion-button block type="submit" (click)="submit(submitForm)">Kirim</button>
		</div>
	</form>
</ion-content>
