<!--
  Generated template for the TambahJualKomoditas page.

  See http://ionicframework.com/docs/v2/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar>
    <ion-title>Jual Komoditas</ion-title>
  </ion-navbar>

</ion-header>


<ion-content>
	<form #submitForm="ngForm" novalidate (ngSubmit)="submit(submitForm)">
		<ion-list>
			<ion-item>
				<ion-label stacked color="primary">Komoditas </ion-label>
				<ion-select [(ngModel)]="selectedKomoditas" placeholder="Pilih komoditas" name="komoditas" #komoditas="ngModel" (ionChange)="changeKomoditas(selectedKomoditas)" required>
					<ion-option *ngFor="let data of dataKomoditas" value="{{data.komoditas_id}}">{{data.name}}</ion-option>
				</ion-select>
			</ion-item>
			<p ion-text [hidden]="komoditas.valid || submitted == false" color="danger" padding-left>
				Pilih komoditas
			</p>

			<ion-item>
				<ion-label stacked color="primary">Harga (per {{dagangan.satuan}})</ion-label>	
				<ion-input [(ngModel)]="dagangan.harga" placeholder="Rp. " name="harga" type="tel" pattern="[0-9]{1,}" min="0" #harga="ngModel" spellcheck="false" autocapitalize="off" required>
				</ion-input>
			</ion-item>
			<div [hidden]="harga.valid || submitted == false" padding-left>
				<p ion-text color="danger" *ngIf="!dagangan.harga">Harga is required</p>
				<p ion-text color="danger" *ngIf="dagangan.harga">Harga is not valid</p>
			</div> 

			<ion-item>
				<ion-label stacked color="primary">Stok Tersedia ({{dagangan.satuan}})</ion-label>	
				<ion-input [(ngModel)]="dagangan.stok" placeholder="Stok" name="stok" type="tel" pattern="[0-9]{1,}" min="0" #stok="ngModel" spellcheck="false" autocapitalize="off" required >
				</ion-input>
			</ion-item>
			<div [hidden]="stok.valid || submitted == false" padding-left>
				<p ion-text color="danger" *ngIf="!dagangan.stok">Stok is required</p>
				<p ion-text color="danger" *ngIf="dagangan.stok">Stok is not valid</p>
			</div> 

			<ion-item>
				<ion-label stacked color="primary">Keterangan</ion-label>
				<ion-textarea [(ngModel)]="dagangan.keterangan" placeholder="Keterangan" name="deskripsi" #deskripsi="ngModel" rows="6" required></ion-textarea>
			</ion-item>
			<p ion-text [hidden]="deskripsi.valid || submitted == false" color="danger" padding-left>
				Keterangan is required
			</p>

			<ion-row>
				<ion-col>
					<ion-row padding>
						<ion-label stacked color="primary">Foto</ion-label>
					</ion-row>
					<ion-row padding>
						<ion-col>
							<div  (click)="takePicture()" >
						        <ion-icon name='camera'></ion-icon>
						          Ambil gambar
					        </div>
						</ion-col>
						<ion-col>
					        <div (click)="getPhotoFromGallery()">
						        <ion-icon name='image'></ion-icon>
						          Pilih dari gallery
					        </div>
						</ion-col>
					</ion-row>
						
					<ion-item *ngIf="dagangan.picture">
						<img [src]="'data:image/jpeg;base64,'+ dagangan.picture" >
					</ion-item>
				</ion-col>
			</ion-row>

		</ion-list>

		<div padding>
			<button ion-button block type="submit">Kirim</button>
		</div>
	</form>
</ion-content>
